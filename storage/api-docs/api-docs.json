{
    "openapi": "3.0.0",
    "info": {
        "title": "OMPAY API",
        "description": "API pour les op√©rations OMPay - FinTech S√©n√©galaise",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000/api",
            "description": "Serveur de d√©veloppement"
        },
        {
            "url": "https://api.ompay.sn/api",
            "description": "Serveur de production"
        }
    ],
    "paths": {
        "/auth/register": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Inscription d'un nouvel utilisateur",
                "description": "Cr√©e un utilisateur avec un compte en attente de v√©rification par OTP. Un SMS avec code OTP sera envoy√©.",
                "operationId": "4183f54dfc8f828f20af14b2d41571c3",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "nom",
                                    "prenom",
                                    "telephone",
                                    "password",
                                    "password_confirmation",
                                    "cni",
                                    "sexe",
                                    "date_naissance"
                                ],
                                "properties": {
                                    "nom": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Diop"
                                    },
                                    "prenom": {
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Amadou"
                                    },
                                    "telephone": {
                                        "type": "string",
                                        "pattern": "^77[0-9]{7}$|^78[0-9]{7}$|^76[0-9]{7}$|^70[0-9]{7}$",
                                        "example": "771234567"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "password123"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password123"
                                    },
                                    "cni": {
                                        "type": "string",
                                        "pattern": "^[A-Z]{2}[0-9]{9}$",
                                        "example": "AB123456789"
                                    },
                                    "sexe": {
                                        "type": "string",
                                        "enum": [
                                            "Homme",
                                            "Femme"
                                        ],
                                        "example": "Homme"
                                    },
                                    "date_naissance": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "1990-01-01"
                                    },
                                    "type_compte": {
                                        "type": "string",
                                        "default": "simple",
                                        "enum": [
                                            "marchand",
                                            "simple"
                                        ],
                                        "example": "simple"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Utilisateur cr√©√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "code_marchand": {
                                                            "type": "string",
                                                            "example": "MCHABC123456",
                                                            "nullable": true
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object",
                                                    "example": {
                                                        "telephone": [
                                                            "Le num√©ro de t√©l√©phone est d√©j√† utilis√©."
                                                        ]
                                                    }
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Utilisateur d√©j√† existant",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Un utilisateur avec ce num√©ro de t√©l√©phone existe d√©j√†."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation des donn√©es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/request-otp": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Demander un code OTP",
                "description": "Envoie un code OTP par SMS pour activation du compte ou connexion. Rate limit√© √† 3 demandes par heure.",
                "operationId": "8c3f66c4616d0ddcbdc0579de98ef469",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "pattern": "^77[0-9]{7}$|^78[0-9]{7}$|^76[0-9]{7}$|^70[0-9]{7}$",
                                        "example": "771234567"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP envoy√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Utilisateur non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Utilisateur non trouv√©."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de tentatives - Rate limit d√©pass√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Trop de tentatives. Veuillez r√©essayer dans une heure."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/verify-otp": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "V√©rifier un code OTP",
                "description": "V√©rifie le code OTP, active le compte si n√©cessaire et retourne les tokens d'acc√®s pour l'authentification.",
                "operationId": "6fe84e8705332a974ea42dc3318dcf97",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone",
                                    "otp"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "pattern": "^77[0-9]{7}$|^78[0-9]{7}$|^76[0-9]{7}$|^70[0-9]{7}$",
                                        "example": "771234567"
                                    },
                                    "otp": {
                                        "type": "string",
                                        "pattern": "^[0-9]{6}$",
                                        "example": "123456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP v√©rifi√© avec succ√®s - tokens retourn√©s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "properties": {
                                                        "tokens": {
                                                            "$ref": "#/components/schemas/AuthTokens"
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "OTP invalide ou expir√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Code OTP invalide ou expir√©."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/refresh": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Rafra√Æchir le token d'acc√®s",
                "description": "G√©n√®re un nouveau token d'acc√®s en utilisant le refresh token avec rotation automatique pour s√©curit√©.",
                "operationId": "6109e37da84dd20520267814deda4b98",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "refresh_token"
                                ],
                                "properties": {
                                    "refresh_token": {
                                        "type": "string",
                                        "example": "tXV9BauXVgz7NElE7bF4NcM2hqSdFCKDn8kV11oaUn4czTroQSnQUoPGkPWMgN8a"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Token rafra√Æchi avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AuthTokens"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Refresh token invalide ou expir√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Refresh token invalide ou expir√©."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "tags": [
                    "üîê Authentification"
                ],
                "summary": "Connexion avec mot de passe",
                "description": "Authentification classique avec t√©l√©phone et mot de passe pour les comptes d√©j√† activ√©s. Rate limit√© apr√®s 5 tentatives √©chou√©es.",
                "operationId": "1a150bca0394a6265673e30ffafef8b2",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "telephone",
                                    "password"
                                ],
                                "properties": {
                                    "telephone": {
                                        "type": "string",
                                        "pattern": "^77[0-9]{7}$|^78[0-9]{7}$|^76[0-9]{7}$|^70[0-9]{7}$",
                                        "example": "771234567"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "minLength": 8,
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/AuthTokens"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Compte verrouill√© ou non activ√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Compte non activ√©. Veuillez v√©rifier votre num√©ro de t√©l√©phone."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Identifiants invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Identifiants invalides."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "429": {
                        "description": "Trop de tentatives - compte verrouill√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Trop de tentatives. Compte verrouill√© pour 15 minutes."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/ompay/balance": {
            "get": {
                "tags": [
                    "üìä Consultation"
                ],
                "summary": "Consulter le solde du compte",
                "description": "R√©cup√®re le solde actuel du compte principal de l'utilisateur connect√©",
                "operationId": "5b4a37191e32018a34af323bdd4d177c",
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "query",
                        "description": "ID du compte sp√©cifique (optionnel, utilise le compte principal par d√©faut)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Solde r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Balance"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Token d'authentification manquant ou invalide",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthenticated."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Aucun compte trouv√© pour cet utilisateur"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/ompay/transfer": {
            "post": {
                "tags": [
                    "üí∏ Transactions"
                ],
                "summary": "Effectuer un transfert d'argent",
                "description": "Transf√®re de l'argent vers un autre compte OMPAY. Cr√©e deux transactions : d√©bit pour l'exp√©diteur, cr√©dit pour le destinataire.",
                "operationId": "e31bce4cdce754a4535593c5bdf1b3cf",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "recipient_telephone",
                                    "amount"
                                ],
                                "properties": {
                                    "recipient_telephone": {
                                        "description": "Num√©ro de t√©l√©phone du destinataire",
                                        "type": "string",
                                        "pattern": "^77[0-9]{7}$|^78[0-9]{7}$|^76[0-9]{7}$|^70[0-9]{7}$",
                                        "example": "772345678"
                                    },
                                    "amount": {
                                        "description": "Montant √† transf√©rer (FCFA)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 1000000,
                                        "minimum": 100,
                                        "example": 500
                                    },
                                    "description": {
                                        "description": "Description optionnelle du transfert",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Paiement facture"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Transfert effectu√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/TransferResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation ou fonds insuffisants",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Solde insuffisant"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Destinataire non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Utilisateur destinataire introuvable"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation des donn√©es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/ompay/history": {
            "get": {
                "tags": [
                    "üìä Consultation"
                ],
                "summary": "Obtenir l'historique des transactions",
                "description": "R√©cup√®re l'historique pagin√© des transactions du compte principal de l'utilisateur",
                "operationId": "7f159acd4d66cccf7723d44fe0e637af",
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Num√©ro de page pour la pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "per_page",
                        "in": "query",
                        "description": "Nombre d'√©l√©ments par page (max 100)",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "description": "Filtrer par type de transaction",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "depot",
                                "retrait",
                                "transfert"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historique r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/TransactionHistory"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthenticated."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Param√®tres de pagination invalides",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/ompay/logout": {
            "post": {
                "tags": [
                    "üîê Auth"
                ],
                "summary": "D√©connexion utilisateur",
                "description": "Invalide tous les tokens d'acc√®s et de rafra√Æchissement",
                "operationId": "b7c46636fca654a4b5627ce9918f7d4f",
                "responses": {
                    "200": {
                        "description": "D√©connexion r√©ussie",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "D√©connexion r√©ussie"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/dashboard": {
            "get": {
                "tags": [
                    "üìà Dashboard"
                ],
                "summary": "Donn√©es du tableau de bord",
                "description": "R√©cup√®re les informations compl√®tes de l'utilisateur connect√© : profil, compte avec solde calcul√© dynamiquement, et les 10 derni√®res transactions",
                "operationId": "10e5d31ce878c354af54f15fa3aa7b1b",
                "responses": {
                    "200": {
                        "description": "Dashboard r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/Dashboard"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthenticated."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Erreur interne du serveur",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Erreur interne du serveur"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/ompay/deposit": {
            "post": {
                "tags": [
                    "üí∏ OMPAY Transactions"
                ],
                "summary": "Effectuer un d√©p√¥t d'argent",
                "description": "Ajoute des fonds sur le compte de l'utilisateur",
                "operationId": "117061371c3cc7479a0514fb9ad48032",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "amount": {
                                        "description": "Montant √† d√©poser (FCFA)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 5000000,
                                        "minimum": 100,
                                        "example": 1000
                                    },
                                    "description": {
                                        "description": "Description optionnelle",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "D√©p√¥t esp√®ces"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "D√©p√¥t effectu√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "D√©p√¥t effectu√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "transaction": {
                                                    "$ref": "#/components/schemas/Transaction"
                                                },
                                                "reference": {
                                                    "type": "string",
                                                    "example": "TXN202511152258103440"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Le montant doit √™tre sup√©rieur √† 100 FCFA"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/ompay/withdraw": {
            "post": {
                "tags": [
                    "üí∏ OMPAY Transactions"
                ],
                "summary": "Effectuer un retrait d'argent",
                "description": "Retire des fonds du compte de l'utilisateur",
                "operationId": "94d95c511307dffda76b5b71bb4c1c49",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "amount": {
                                        "description": "Montant √† retirer (FCFA)",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 1000000,
                                        "minimum": 100,
                                        "example": 500
                                    },
                                    "description": {
                                        "description": "Description optionnelle",
                                        "type": "string",
                                        "maxLength": 255,
                                        "example": "Retrait DAB"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Retrait effectu√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Retrait effectu√© avec succ√®s"
                                        },
                                        "data": {
                                            "properties": {
                                                "transaction": {
                                                    "$ref": "#/components/schemas/Transaction"
                                                },
                                                "reference": {
                                                    "type": "string",
                                                    "example": "TXN202511152259204561"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation ou fonds insuffisants",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Solde insuffisant"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/ompay/transactions/{compteId}": {
            "get": {
                "tags": [
                    "üìä OMPAY Consultation"
                ],
                "summary": "Obtenir l'historique des transactions d'un compte",
                "description": "R√©cup√®re l'historique d√©taill√© des transactions pour un compte sp√©cifique",
                "operationId": "35e287f17954e74df9bec3f0c4d69b7a",
                "parameters": [
                    {
                        "name": "compteId",
                        "in": "path",
                        "description": "ID du compte",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Historique r√©cup√©r√© avec succ√®s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": true
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Historique r√©cup√©r√© avec succ√®s"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Transaction"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Compte non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean",
                                            "example": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Compte introuvable"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "bearerAuth": []
                    }
                ]
            }
        },
        "/paiement/marchand": {
            "post": {
                "tags": [
                    "üè™ Paiements"
                ],
                "summary": "Effectuer un paiement vers un marchand",
                "description": "Permet √† un client de payer un marchand en utilisant son code marchand unique. Le paiement cr√©e deux transactions : d√©bit du client et cr√©dit du marchand. Un SMS de confirmation est envoy√© aux deux parties.",
                "operationId": "def4758660597c05c019c6c838037043",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "code_marchand",
                                    "montant"
                                ],
                                "properties": {
                                    "code_marchand": {
                                        "description": "Code marchand unique du destinataire (format: MCHXXXXXXXX)",
                                        "type": "string",
                                        "pattern": "^MCH[A-Z0-9]{8}$",
                                        "example": "MCHABC123456"
                                    },
                                    "montant": {
                                        "description": "Montant √† payer en FCFA",
                                        "type": "number",
                                        "format": "float",
                                        "maximum": 1000000,
                                        "minimum": 100,
                                        "example": 5000
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Paiement effectu√© avec succ√®s - SMS de confirmation envoy√©s",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "data": {
                                                    "$ref": "#/components/schemas/MerchantPaymentResponse"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Erreur de validation ou paiement impossible",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Solde insuffisant"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Non authentifi√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthenticated."
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Code marchand invalide ou compte marchand non trouv√©",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "message": {
                                                    "type": "string",
                                                    "example": "Code marchand invalide"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Erreur de validation des donn√©es",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/ApiResponse"
                                        },
                                        {
                                            "properties": {
                                                "success": {
                                                    "type": "boolean",
                                                    "example": false
                                                },
                                                "errors": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "User": {
                "properties": {
                    "nom": {
                        "type": "string",
                        "example": "Diop"
                    },
                    "prenom": {
                        "type": "string",
                        "example": "Amadou"
                    },
                    "telephone": {
                        "type": "string",
                        "example": "771234567"
                    },
                    "email": {
                        "type": "string",
                        "example": "amadou.diop@example.com"
                    }
                },
                "type": "object"
            },
            "Compte": {
                "properties": {
                    "numero_compte": {
                        "type": "string",
                        "example": "OM12345678"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "marchand",
                            "simple"
                        ]
                    },
                    "statut": {
                        "type": "string",
                        "enum": [
                            "actif",
                            "inactif",
                            "bloqu√©",
                            "ferm√©"
                        ]
                    },
                    "solde": {
                        "type": "number",
                        "format": "float",
                        "example": 1500.5
                    },
                    "devise": {
                        "type": "string",
                        "example": "FCFA"
                    },
                    "code_marchand": {
                        "type": "string",
                        "example": "MCHABC123456",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "Transaction": {
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "depot",
                            "retrait",
                            "transfert"
                        ]
                    },
                    "montant": {
                        "type": "number",
                        "format": "float",
                        "example": 1000
                    },
                    "statut": {
                        "type": "string",
                        "enum": [
                            "reussi",
                            "echec",
                            "en_cours"
                        ]
                    },
                    "date_operation": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "reference": {
                        "type": "string",
                        "example": "TXN202511152300034086"
                    }
                },
                "type": "object"
            },
            "Balance": {
                "properties": {
                    "solde": {
                        "type": "number",
                        "format": "float",
                        "example": 1500.5
                    },
                    "devise": {
                        "type": "string",
                        "example": "FCFA"
                    }
                },
                "type": "object"
            },
            "TransactionHistory": {
                "properties": {
                    "transactions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Transaction"
                        }
                    },
                    "pagination": {
                        "properties": {
                            "current_page": {
                                "type": "integer",
                                "example": 1
                            },
                            "per_page": {
                                "type": "integer",
                                "example": 20
                            },
                            "total": {
                                "type": "integer",
                                "example": 150
                            },
                            "last_page": {
                                "type": "integer",
                                "example": 8
                            }
                        },
                        "type": "object"
                    }
                },
                "type": "object"
            },
            "Dashboard": {
                "properties": {
                    "user": {
                        "$ref": "#/components/schemas/User"
                    },
                    "compte": {
                        "$ref": "#/components/schemas/Compte"
                    },
                    "transactions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Transaction"
                        }
                    }
                },
                "type": "object"
            },
            "ApiResponse": {
                "properties": {
                    "success": {
                        "type": "boolean",
                        "example": true
                    },
                    "message": {
                        "type": "string",
                        "example": "Op√©ration r√©ussie"
                    },
                    "data": {
                        "type": "object",
                        "nullable": true
                    },
                    "errors": {
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "AuthTokens": {
                "properties": {
                    "access_token": {
                        "type": "string",
                        "example": "1|hCrUqzgS8DhPIk3CLIaV1gsvtEmGrKn9IWxsoxkD04360b9a"
                    },
                    "refresh_token": {
                        "type": "string",
                        "example": "tXV9BauXVgz7NElE7bF4NcM2hqSdFCKDn8kV11oaUn4czTroQSnQUoPGkPWMgN8a"
                    },
                    "token_type": {
                        "type": "string",
                        "example": "Bearer"
                    },
                    "expires_in": {
                        "type": "integer",
                        "example": 900
                    }
                },
                "type": "object"
            },
            "TransferResponse": {
                "properties": {
                    "debit_transaction": {
                        "$ref": "#/components/schemas/Transaction"
                    },
                    "credit_transaction": {
                        "$ref": "#/components/schemas/Transaction"
                    },
                    "reference": {
                        "type": "string",
                        "example": "TXN202511152302356175"
                    }
                },
                "type": "object"
            },
            "DepositWithdrawResponse": {
                "properties": {
                    "transaction": {
                        "$ref": "#/components/schemas/Transaction"
                    },
                    "reference": {
                        "type": "string",
                        "example": "TXN202511152258103440"
                    }
                },
                "type": "object"
            },
            "MerchantPaymentResponse": {
                "properties": {
                    "debit_transaction": {
                        "$ref": "#/components/schemas/Transaction"
                    },
                    "credit_transaction": {
                        "$ref": "#/components/schemas/Transaction"
                    },
                    "reference": {
                        "type": "string",
                        "example": "TXN202511152302356175"
                    }
                },
                "type": "object"
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "apiKey",
                "description": "Enter token in format: Bearer {token}",
                "name": "Authorization",
                "in": "header"
            },
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT",
                "description": "Enter JWT token in format (Bearer <token>)"
            }
        }
    },
    "tags": [
        {
            "name": "üîê Authentification",
            "description": "Authentification et gestion des utilisateurs"
        },
        {
            "name": "üí∏ Transactions",
            "description": "Op√©rations financi√®res (d√©p√¥t, retrait, transfert)"
        },
        {
            "name": "üìä Consultation",
            "description": "Consultation soldes et historiques"
        },
        {
            "name": "üè™ Paiements",
            "description": "Paiements vers les comptes marchands"
        },
        {
            "name": "üìà Dashboard",
            "description": "Tableau de bord utilisateur"
        },
        {
            "name": "üîê Auth",
            "description": "üîê Auth"
        },
        {
            "name": "üí∏ OMPAY Transactions",
            "description": "üí∏ OMPAY Transactions"
        },
        {
            "name": "üìä OMPAY Consultation",
            "description": "üìä OMPAY Consultation"
        }
    ]
}